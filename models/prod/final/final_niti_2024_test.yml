models:
  - name: farmer_endline_niti_2024
    description: "Farmer data compiled with Endline Status from encounters"
    columns:
      - name: farmer_id
        tests:
          - not_null
      - name: farmer_name
        tests:
          - not_null
      - name: dam
        tests:
          - not_null
      - name: district
        tests:
          - not_null
      - name: state
        tests:
          - not_null
      - name: taluka
        tests:
          - not_null
      - name: village
        tests:
          - not_null
      - name: endline_status
        tests:
          - accepted_values:
              values:
                - 'Endline Done'
                - 'Endline Not Done'

  - name: machine_endline_niti_2024
    description: "Machine Data Compiled with Endline Status from encounters"
    columns:
      - name: machine_id
        tests:
          - not_null
      - name: machine_name
        tests:
          - not_null
      - name: type_of_machine
        tests:
          - not_null
      - name: dam
        tests:
          - not_null
      - name: district
        tests:
          - not_null
      - name: subject_type
        tests:
          - not_null
      - name: state
        tests:
          - not_null
      - name: taluka
        tests:
          - not_null
      - name: village
        tests:
          - not_null
      - name: machine_voided
        tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: machine_approval_status
        tests:
          - not_null
      - name: endline_status
        tests:
          - accepted_values:
              values:
                - 'Endline Done'
                - 'Endline Not Done'

  - name: farmer_silt_vulnerable_niti_24
    description: "Model that calculates silt carted for vulnerable and other farmers"
    columns:
      - name: state
        tests:
          - not_null
      - name: district
        tests:
          - not_null
      - name: taluka
        tests:
          - not_null
      - name: village
        tests:
          - not_null
      - name: dam
        tests:
          - not_null
      - name: ngo_name
        tests:
          - not_null
      - name: farmer_type
        tests:
          - not_null
          - accepted_values:
              values: ['vulnerable', 'others']
      - name: total_silt_carted
        tests:
          - not_null

  - name: barren_fertile_silt_niti_2024
    description: "Aggregated silt achievement data for farmers who have completed the endline survey."
    columns:
      - name: work_order_name
        tests:
          - not_null

      - name: date_time
        tests:
          - not_null

      - name: state
        tests:
          - not_null

      - name: district
        tests:
          - not_null

      - name: taluka
        tests:
          - not_null

      - name: dam
        tests:
          - not_null

      - name: village
        tests:
          - not_null

      - name: ngo_name
        tests:
          - not_null

      - name: endline_status
        tests:
          - accepted_values:
              values:
                - 'Endline Done'

      - name: silt_achieved_by_endline_farmers
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "{{ column_name }} > 0"

      - name: total_farm_area_silt_is_spread_on
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "{{ column_name }} >= 0"
      
      - name: type_of_land_silt_is_spread_on
        tests: 
          - accepted_values:
              values: ['Fertile', 'Barren']

  - name: silt_per_acre_niti_2024
    description: "Aggregated silt per acre data for farmers with completed endline surveys, including benchmark classification."
    columns:
      - name: work_order_name
        tests:
          - not_null

      - name: date_time
        tests:
          - not_null

      - name: state
        tests:
          - not_null

      - name: district
        tests:
          - not_null

      - name: taluka
        tests:
          - not_null

      - name: dam
        tests:
          - not_null

      - name: village
        tests:
          - not_null

      - name: ngo_name
        tests:
          - not_null

      - name: endline_status
        tests:
          - accepted_values:
              values:
                - 'Endline Done'

      - name: silt_achieved_by_endline_farmers
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "{{ column_name }} > 0"

      - name: total_farm_area_silt_is_spread_on
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "{{ column_name }} >= 0"

      - name: silt_per_acre
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "{{ column_name }} >= 0"

      - name: silt_per_acre_benchmark_classification
        tests:
          - accepted_values:
              values:
                - 'Above Benchmark'
                - 'Below Benchmark'
